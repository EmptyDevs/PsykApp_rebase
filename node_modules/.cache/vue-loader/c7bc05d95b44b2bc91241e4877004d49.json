{"remainingRequest":"/home/totar/Documents/projets_perso/projet_bde_psyk/PsykApp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/totar/Documents/projets_perso/projet_bde_psyk/PsykApp/src/views/Order.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/totar/Documents/projets_perso/projet_bde_psyk/PsykApp/src/views/Order.vue","mtime":1581104606113},{"path":"/home/totar/Documents/projets_perso/projet_bde_psyk/PsykApp/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/totar/Documents/projets_perso/projet_bde_psyk/PsykApp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/totar/Documents/projets_perso/projet_bde_psyk/PsykApp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IENhcnRJdGVtIGZyb20gIi4uL2NvbXBvbmVudHMvc2hvcC9jYXJ0X2l0ZW0iOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ2FydEl0ZW0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgY2FydDogImdldENhcnQiLAogICAgICBnZXRPcmRlcjogIk9yZGVyTW9kdWxlL2dldE9yZGVyIiwKICAgICAgdXNlcjogIlVzZXJNb2R1bGUvZ2V0VXNlciIKICAgIH0pCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKHsKICAgICAgcmVzZXRfY2FydDogInJlc2V0X2NhcnQiLAogICAgICBmZXRjaENhdGVnb3J5OiAiQ2F0ZWdvcnlNb2R1bGUvZmV0Y2hDYXRlZ29yeSIsCiAgICAgIHNldF9jYXJ0X2lkOiAic2V0X2NhcnRfaWQiLAogICAgICBwYXNzT3JkZXI6ICJPcmRlck1vZHVsZS9wYXNzT3JkZXIiLAogICAgICBmZXRjaE9yZGVyOiAiT3JkZXJNb2R1bGUvZmV0Y2hPcmRlciIKICAgIH0pLAogICAgaXNQaG9uZU51bWJlcihudW1iZXIpIHsKICAgICAgaWYgKG51bWJlci5sZW5ndGggIT0gMTApIHJldHVybiBmYWxzZTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXIubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoIShudW1iZXJbaV0gPD0gIjkiICYmIG51bWJlcltpXSA+PSAiMCIpKSByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgY29tbWFuZCgpIHsKICAgICAgdmFyIG51bWJlciA9IHRoaXMucGhvbmVOdW1iZXI7CiAgICAgIGlmICghbnVtYmVyKSB7CiAgICAgICAgdGhpcy5vcmRlclNhdHVzLmRpc3BsYXkgPSB0cnVlOwogICAgICAgIHRoaXMub3JkZXJTYXR1cy5zdGF0dXMgPSAiZXJyb3IiOwogICAgICAgIHRoaXMub3JkZXJTYXR1cy5kZXRhaWxzID0KICAgICAgICAgICJUdSBuJ2FzIHBhcyByZW5zZWlnbsOpIHRvbiBudW3DqXJvIGRlIHTDqWzDqXBob25lLiBUdSBuZSBwZXV4IGRvbmMgcGFzIGNvbW1hbmRlci4iOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMuaXNQaG9uZU51bWJlcihudW1iZXIpKSB7CiAgICAgICAgdGhpcy5vcmRlclNhdHVzLmRpc3BsYXkgPSB0cnVlOwogICAgICAgIHRoaXMub3JkZXJTYXR1cy5zdGF0dXMgPSAiZXJyb3IiOwogICAgICAgIHRoaXMub3JkZXJTYXR1cy5kZXRhaWxzID0KICAgICAgICAgICJOdW3DqXJvIGRlIHTDqWzDqXBob25lIG5vbiB2YWxpZGUuIElsIGRvaXQgw6p0cmUgZHUgdHlwZSAwMTIzNDU2Nzg5IjsKICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gIiI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRoaXMudXNlci5kYXRhKSk7CiAgICAgIHZhciBjb21tYW5kID0gewogICAgICAgIGNvbnRlbnQ6IHRoaXMuY2FydCwKICAgICAgICB1c2VyOiB0aGlzLnVzZXIuZGF0YSwKICAgICAgICBzdGF0dXM6IDAKICAgICAgfTsKICAgICAgdGhpcy5wYXNzT3JkZXIoY29tbWFuZCkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5yZXNldF9jYXJ0KCk7CiAgICAgICAgdGhpcy5vcmRlclNhdHVzLmRpc3BsYXkgPSB0cnVlOwogICAgICAgIHRoaXMub3JkZXJTYXR1cy5zdGF0dXMgPSAic3VjY2VzcyI7CiAgICAgICAgdGhpcy5vcmRlclNhdHVzLmRldGFpbHMgPQogICAgICAgICAgIkNvbW1hbmRlIHBhc3PDqWUuIE5vdXMgYWxsb25zIGJpZW50w7R0IHJldmVuaXIgdmVycyB0b2kgISI7CiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9ICIiOwogICAgICB9KTsKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcmRlclNhdHVzOiB7CiAgICAgICAgZGlzcGxheTogZmFsc2UsCiAgICAgICAgc3RhdHVzOiAid2FybmluZyIsCiAgICAgICAgZGV0YWlsczogIiIKICAgICAgfSwKICAgICAgcGhvbmVOdW1iZXI6ICIiCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIHNvdXJjZTogU3RyaW5nCiAgfQp9Owo="},{"version":3,"sources":["Order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Order.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-content>\n    <v-container fluid>\n      <v-card class=\"mx-auto\" color=\"#7DBF73\" dark max-width=\"1000\">\n        <v-alert v-if=\"orderSatus.display\" :type=\"orderSatus.status\">{{this.orderSatus.details}}</v-alert>\n        <v-card-title>\n          <v-btn icon to=\"/shop\">\n            <v-icon>mdi-arrow-left</v-icon>\n          </v-btn>\n          <v-spacer />\n          <span class=\"overline font-weight-light\">Panier</span>\n        </v-card-title>\n\n        <v-container>\n            <v-list-item v-for=\"(product, i) in cart\" :key=\"i\" link style=\"padding: 5px\">\n              <CartItem :data=\"product\" />\n            </v-list-item>\n        </v-container>\n\n        <v-card-actions>\n          <v-list-item class=\"grow\">\n            <v-list-item-avatar color=\"grey darken-3\">\n              <v-img class=\"elevation-6\" :src=\"user.data.photo\"></v-img>\n            </v-list-item-avatar>\n\n            <v-list-item-content>\n              <v-list-item-title>{{user.data.displayName}}</v-list-item-title>\n            </v-list-item-content>\n\n            <v-row align=\"center\" justify=\"end\">\n              <v-tooltip right>\n                <template v-slot:activator=\"{ on }\">\n                  <v-btn icon large target=\"_blank\" v-on=\"on\" @click=\"reset_cart\">\n                    <v-icon large>mdi-delete</v-icon>\n                  </v-btn>\n                </template>\n                <span>Vider le panier</span>\n              </v-tooltip>\n              <span class=\"mr-1\">·</span>\n              <v-tooltip right>\n                <template v-slot:activator=\"{ on }\">\n                  <v-btn icon large target=\"_blank\" v-on=\"on\" @click=\"command\">\n                    <v-icon large>mdi-export</v-icon>\n                  </v-btn>\n                </template>\n                <span>Commander</span>\n              </v-tooltip>\n            </v-row>\n          </v-list-item>\n        </v-card-actions>\n      </v-card>\n    </v-container>\n  </v-content>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from \"vuex\";\nimport CartItem from \"../components/shop/cart_item\";\nexport default {\n  components: {\n    CartItem\n  },\n  computed: {\n    ...mapGetters({\n      cart: \"getCart\",\n      getOrder: \"OrderModule/getOrder\",\n      user: \"UserModule/getUser\"\n    })\n  },\n  methods: {\n    ...mapActions({\n      reset_cart: \"reset_cart\",\n      fetchCategory: \"CategoryModule/fetchCategory\",\n      set_cart_id: \"set_cart_id\",\n      passOrder: \"OrderModule/passOrder\",\n      fetchOrder: \"OrderModule/fetchOrder\"\n    }),\n    isPhoneNumber(number) {\n      if (number.length != 10) return false;\n      for (var i = 0; i < number.length; i++) {\n        if (!(number[i] <= \"9\" && number[i] >= \"0\")) return false;\n      }\n      return true;\n    },\n    command() {\n      var number = this.phoneNumber;\n      if (!number) {\n        this.orderSatus.display = true;\n        this.orderSatus.status = \"error\";\n        this.orderSatus.details =\n          \"Tu n'as pas renseigné ton numéro de téléphone. Tu ne peux donc pas commander.\";\n        return;\n      }\n      if (!this.isPhoneNumber(number)) {\n        this.orderSatus.display = true;\n        this.orderSatus.status = \"error\";\n        this.orderSatus.details =\n          \"Numéro de téléphone non valide. Il doit être du type 0123456789\";\n        this.phoneNumber = \"\";\n        return;\n      }\n      console.log(JSON.stringify(this.user.data));\n      var command = {\n        content: this.cart,\n        user: this.user.data,\n        status: 0\n      };\n      this.passOrder(command).then(() => {\n        this.reset_cart();\n        this.orderSatus.display = true;\n        this.orderSatus.status = \"success\";\n        this.orderSatus.details =\n          \"Commande passée. Nous allons bientôt revenir vers toi !\";\n        this.phoneNumber = \"\";\n      });\n    }\n  },\n  data() {\n    return {\n      orderSatus: {\n        display: false,\n        status: \"warning\",\n        details: \"\"\n      },\n      phoneNumber: \"\"\n    };\n  },\n  props: {\n    source: String\n  }\n};\n</script>"]}]}